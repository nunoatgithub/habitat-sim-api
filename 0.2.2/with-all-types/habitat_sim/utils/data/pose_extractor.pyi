import habitat_sim
import numpy as np
from _typeshed import Incomplete
from habitat_sim.utils.common import quat_from_two_vectors as quat_from_two_vectors
from numpy import bool_, float32 as float32, float64 as float64, ndarray
from quaternion import quaternion
from typing import List, Tuple

class TopdownView:
    topdown_view: habitat_sim.nav.PathFinder
    def __init__(self, sim, height, meters_per_pixel: float = 0.1) -> None: ...

class PoseExtractor:
    tdv_fp_ref_triples: Incomplete
    meters_per_pixel: Incomplete
    labels: Incomplete
    def __init__(self, topdown_views: List[Tuple[TopdownView, str, Tuple[float32, float32, float32]]], meters_per_pixel: float = 0.1) -> None: ...
    def extract_all_poses(self) -> np.ndarray: ...
    def extract_poses(self, view: np.ndarray, fp: str) -> List[Tuple[Tuple[int, int], Tuple[int, int], str]]: ...
    def _valid_point(self, row: int, col: int, view: ndarray) -> bool_: ...
    def _is_point_of_interest(self, point: Tuple[int, int], labels: List[float], view: ndarray) -> Tuple[bool, float64]: ...
    def _compute_quat(self, cam_normal: ndarray) -> quaternion: ...
    def _convert_to_scene_coordinate_system(self, poses: List[Tuple[Tuple[int, int], Tuple[int, int], str]], ref_point: Tuple[float32, float32, float32]) -> List[Tuple[Tuple[int, int], quaternion, str]]: ...

class ClosestPointExtractor(PoseExtractor):
    def __init__(self, topdown_views: List[Tuple[TopdownView, str, Tuple[float32, float32, float32]]], meters_per_pixel: float = 0.1) -> None: ...
    def extract_poses(self, view: ndarray, fp: str) -> List[Tuple[Tuple[int, int], Tuple[int, int], str]]: ...
    def _bfs(self, point: Tuple[int, int], labels: List[float], view: ndarray, dist: int) -> Tuple[Tuple[int, int], float64] | Tuple[None, None]: ...

class PanoramaExtractor(PoseExtractor):
    def __init__(self, topdown_views: List[Tuple[TopdownView, str, Tuple[float32, float32, float32]]], meters_per_pixel: float = 0.1) -> None: ...
    def extract_poses(self, view: ndarray, fp: str) -> List[Tuple[Tuple[int, int], Tuple[int, int], str]]: ...
    def _panorama_extraction(self, point: Tuple[int, int], view: ndarray, dist: int) -> List[Tuple[Tuple[int, int], float]]: ...
